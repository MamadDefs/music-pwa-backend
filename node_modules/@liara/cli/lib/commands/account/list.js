"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const core_1 = require("@oclif/core");
const base_1 = tslib_1.__importDefault(require("../../base"));
class AccountList extends base_1.default {
    async run() {
        const { flags } = await this.parse(AccountList);
        const liara_json = await this.readGlobalConfig();
        if (!liara_json ||
            !liara_json.accounts ||
            Object.keys(liara_json.accounts).length === 0) {
            this.error("Please add your accounts via 'liara account:add' command, first.");
        }
        const accountsData = Object.entries(liara_json.accounts).map((acc) => {
            const Name = acc[0];
            const Email = acc[1].email;
            const Region = acc[1].region;
            const Current = acc[1].current ? 'üëç' : '';
            return { Name, Email, Region, Current };
        });
        core_1.CliUx.ux.table(accountsData, { Name: {}, Email: {}, Region: {}, Current: {} }, flags);
    }
}
exports.default = AccountList;
AccountList.description = 'list available accounts';
AccountList.flags = Object.assign(Object.assign({}, base_1.default.flags), core_1.CliUx.ux.table.flags());
AccountList.aliases = ['account:ls'];
